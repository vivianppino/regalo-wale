<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regalo Wale</title>
    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>
</head>
<body>
    <header>
        <h1>ğŸ Regalo Wale ğŸ’</h1>
    </header>
    <main>
        <div id="password-container">
            <h2>Bienvenida amor ğŸ’•</h2>
            <p>Por favor ingresa la clave para continuar:</p>
            <input type="password" id="password-input" placeholder="Introduce la clave" autocomplete="off" required>
            <button id="password-button">Aceptar</button>
            <p id="error-message" style="color: var(--red-main); font-weight: bold; margin-top: 1rem;"></p>
        </div>
        <div id="games-container" style="display: none;">
            <h2>ğŸ® Minijuegos ğŸ®</h2>
            <p>Resuelve los 2 minijuegos para acceder a la sorpresa final âœ¨</p>
            <ul>
                <li>
                    <a href="games/puzzle.html">ğŸ’ Juego de Memoria ğŸ’</a>
                    <div class="status" id="puzzle-status">â­• Pendiente</div>
                </li>
                <li>
                    <a href="games/quiz.html">ğŸ“ Quiz ğŸ“</a>
                    <div class="status" id="quiz-status">â­• Pendiente</div>
                </li>
            </ul>
            <div style="text-align: center;">
                <button id="final-button" style="display: none;">
                    ğŸ‰ Â¡Ir al Final! ğŸ‰
                </button>
            </div>
        </div>
    </main>

    <script>
        const PASSWORD = 'BIMBO';

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('password-input');
            const errorMessage = document.getElementById('error-message');
            const passwordContainer = document.getElementById('password-container');
            const gamesContainer = document.getElementById('games-container');
            const passwordButton = document.getElementById('password-button');
            const finalButton = document.getElementById('final-button');

            // Mantener desbloqueado en la sesiÃ³n si ya ingresaron la clave
            if (sessionStorage.getItem('unlocked') === 'true') {
                passwordContainer.style.display = 'none';
                gamesContainer.style.display = 'block';
                updateGameStatus();
            }

            // Tecla Enter en input de contraseÃ±a
            form.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkPassword();
                }
            });

            passwordButton.addEventListener('click', checkPassword);

            function checkPassword() {
                const val = form.value.trim();
                if (val.toUpperCase() === PASSWORD) {
                    errorMessage.textContent = '';
                    sessionStorage.setItem('unlocked', 'true');
                    passwordContainer.style.display = 'none';
                    gamesContainer.style.display = 'block';
                    updateGameStatus();
                } else {
                    errorMessage.textContent = 'Clave incorrecta. Intenta de nuevo.';
                    form.value = '';
                    form.focus();
                }
            }

            finalButton.addEventListener('click', () => {
                window.location.href = 'games/final.html';
            });

            function updateGameStatus() {
                const completed = JSON.parse(sessionStorage.getItem('games-completed') || '{"puzzle": false, "wordsearch": false, "quiz": false}');
                
                // Actualizar estados
                document.getElementById('puzzle-status').textContent = completed.puzzle ? 'âœ… Completado' : 'â­• Pendiente';
                document.getElementById('quiz-status').textContent = completed.quiz ? 'âœ… Completado' : 'â­• Pendiente';

                // Mostrar botÃ³n si ambos estÃ¡n completos
                if (completed.puzzle && completed.quiz) {
                    finalButton.style.display = 'inline-block';
                }
            }

            // Actualizar estados cada segundo
            setInterval(updateGameStatus, 1000);
        });
    </script>
</body>
</html>